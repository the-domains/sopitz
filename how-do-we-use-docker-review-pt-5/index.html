<!DOCTYPE html>
<html dir="ltr" lang="en"><head><title>Luminoso Consulting - How do we use Docker? (Review Pt. 5)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="generator" content="The Grid the-composer/ds-nick-jones/0.0.108">
  <meta name="the-grid-solution" content="fe57dafd-75e8-48f4-9a2c-79560e71a942">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.9.1/polyfill.js"></script>
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/styles/css/style.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/styles/css/animations.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/styles/css/props.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/styles/css/focalpoint.css" type="text/css" />
  <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/ds-nick-jones-components.dist.min.js"></script>
  <style id="web-font-binder" type="text/css">html { font-family: '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } html.wf-active { font-family: 'Varela Round', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-title, .wf-active .font-headline, .wf-active .font-h1, .wf-active .font-h2, .wf-active .font-h3 { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-subtitle, .wf-active .font-h4, .wf-active .font-h5, .wf-active .font-h6 { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 700; } .wf-active .font-text, .wf-active .font-list { font-family: 'Varela Round', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; } .wf-active .font-quote { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400;font-style: italic; } .wf-active .font-cta { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; }</style><meta property="og:site_name" content="Shining a light in IT"/><link rel="alternate" type="application/rss+xml" title="RSS" href="./rss.xml"/></head><body><div id="app" data-reactroot="" data-reactid="1" data-react-checksum="679144360"><div id="wrapper" class="System color-bg m-t-0 p-l-3 ls-p-l-4 Brockmann section-h-padding-small section-v-padding-small hero-transition-none  colors-light colors-global " data-reactid="2"><span style="display:hidden;" data-reactid="3"></span><section id="0" class="Section Section--components-1 Section--nav color-box h-fs w-3rem ls-w-4rem title-size-medium bx-sh-soft  colors-light colors-global " data-reactid="4"><div class="Component Nav--hamburger h-fs l--05rem ls-l-0 pos-r" data-reactid="5"><div class="Site-title color-text-pop pos-a rot-90 t-o-bl w-100vh z-20 m-t-1 l-1rem t-5rem" data-reactid="6"><span class="f-s-ms w-s-nw" data-reactid="7"><a data-reactid="8">Luminoso Consulting</a></span></div><a href="index.html" class="l-1rem t-4rem pos-a z-20" data-reactid="9"><img src="https://the-grid-user-content.s3-us-west-2.amazonaws.com/9ff4a1f7-0bca-4acf-90aa-c24a124e27f5.jpg" class="w-2rem" data-reactid="10"/></a><!-- react-empty: 11 --><!-- react-text: 12 --><!-- /react-text --></div></section><div class="min-h-80vh" data-reactid="13"><section id="1" class="Section Section--components-1 color-title title-size-medium p-0 ls-p-h-13vw ls-p-v-3  color-bg text-align-center  colors-dark colors-global " data-reactid="14"><div class="Component p-1 " data-reactid="15"><div class="Group Group--column min-w-240px p-1 m-a" data-reactid="16"><!-- react-empty: 17 --><div class="System-font ls-max-w-0 Headline" data-reactid="18"><h1 data-reactid="19"><span class="" data-reactid="20"><span class="font-title" data-reactid="21">Shining a light in IT</span></span></h1></div><!-- react-empty: 22 --><!-- react-empty: 23 --></div></div></section><section id="2" class="Section Section--components-1 no-padding p-0 w-100p color-bg color-title d-b Section--article title-size-large section-bgcover-and  colors-dark colors-local " data-reactid="24"><div class="Component p-1" data-reactid="25"><div class="Bg color-box-pop-2 op-30" data-reactid="26"><div class="Cover ov-h" data-reactid="27"><picture class="min-h-80px" data-reactid="28"><source media="(min-width: 1440px)" srcset="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/1855025d94e6b062577136e4ed47eb08/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=1400" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="29"/><source media="(min-width: 1280px)" srcset="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/7b8acf6b751ece59d4020b0cd489366f/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=1280" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="30"/><source media="(min-width: 720px)" srcset="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/d5cbfa25b8dda054883a3492412d365a/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=720" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="31"/><source media="(min-width: 360px)" srcset="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/6bdf1139ad497e8affe2937b9aff0cfb/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=360" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="32"/><img class="color-loading" data-width="1400" data-height="621" data-ratio="2.254428341384863" src="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/1855025d94e6b062577136e4ed47eb08/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=1400" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="33"/></picture></div></div><div class="Group Group--graphical p-1 w-100p ls-w-20p l-0rem ls-l-3rem pos-r ls-pos-f v-a-t" data-reactid="34"><div class="Cover ov-h" data-reactid="35"><picture class="min-h-80px" data-reactid="36"><source media="(min-width: 1440px)" srcset="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/1855025d94e6b062577136e4ed47eb08/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=1400" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="37"/><source media="(min-width: 1280px)" srcset="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/7b8acf6b751ece59d4020b0cd489366f/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=1280" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="38"/><source media="(min-width: 720px)" srcset="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/d5cbfa25b8dda054883a3492412d365a/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=720" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="39"/><source media="(min-width: 360px)" srcset="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/6bdf1139ad497e8affe2937b9aff0cfb/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=360" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="40"/><img class="color-loading" data-width="1400" data-height="621" data-ratio="2.254428341384863" src="https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/1855025d94e6b062577136e4ed47eb08/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&amp;width=1400" style="object-position:92.87109375% 89.60472020933977%;" data-reactid="41"/></picture></div></div><div class="Group Group--meta p-1 color-text pos-f min-w-240px w-100p ls-w-20p r-1rem ls-r-3rem d-ib " data-reactid="42"><div class="Attribution " data-reactid="43"><h5 data-reactid="44"><span class="Author f-s-xxs " data-reactid="45">Simon Opitz</span></h5></div></div><div class="Group Group--column min-w-240px p-1 color-title v-a-t d-b m-a w-100p ls-w-50p" data-reactid="46"><div class="System-font " data-reactid="47"><h2 data-reactid="48"><span data-reactid="49"><span class="font-title" data-reactid="50">How do we use Docker? (Review Pt. 5)</span></span></h2></div><!-- react-empty: 51 --></div></div><article id="2" class="Component color-text p-1" data-reactid="52"><div class="Content Dropcap" data-reactid="53"><p>We at [eForce21](http://www.eforce21.com) use Docker in various customer projects as well as for our own infrastructure. I want to give you some real life `Dockerfile`s and `docker-compose.yml`s that give you an idea of what you can do with docker. Hint: not all of those examples will automatically work out of the box for you guys because some of the `Dockerfiles` cannot be published due to NDAs and confidentiality concerns. But please just leave me a comment or a tweet at [@_sopitz](https://twitter.com/_sopitz). I'm happy to help.</p><p># jwilder/nginx-proxy<br>[That's](https://github.com/jwilder/nginx-proxy) our magical tool. We reverse proxy all our applications on our servers for domain-name, ssl and access management. It will basically do everything for you. You will map the docker socket into the container and it listens for new containers, stopped containers and will perform all the actions necessary to make you happy. Our `Dockerfile` looks like this:</p><p>&lt;pre&gt;<br>FROM jwilder/nginx-proxy</p><p>COPY config/vhosts/* /etc/nginx/vhost.d/<br>COPY config/global/* /etc/nginx/conf.d/<br>&lt;/pre&gt;</p><p>There is a file in `config/global/` called `proxy.conf` where we've defined a couple of settings that should be applied for all vhosts. E. g. `client_max_body_size 0;` to make sure we can pull and push bigger files to our GitLab or docker-registry.<br>`config/vhosts/` contains files that resemble the name of your vhost (e. g. simonopitz.me for this domain). You can specify settings for a single vhost with these files. When you build the `Dockerfile` all your vhosts will be configured accordingly during the container build. Once the containers are started you will automatically get your vhost-configs generated by jwilders nginx-proxy.</p><p># Build-Server<br>We have completely automated the setup of our build server. As we keep all our configurations in a git repository all we have to do is a check out on a machine, run a shell script and the whole server is configured. Even the Jenkins Jobs are put in place correctly and work out of the box. Here is what the structure looks like:<br>![](/content/images/2015/12/docker-usage-eforce-structure3.png)</p><p>The setup.sh basically does all we need. It collects paths for volumes and all settings, builds images, runs all containers and pushes everything to our registry. But have a look yourself:<br>&lt;pre&gt;<br>#/bin/bash -e<br>. settings/containers.rc<br>. settings/images.rc<br>. settings/volumes.rc</p><p>OPTIND=1<br>default="false"<br>while getopts "d?" opt; do<br> case "$opt" in<br> d ) default="true"<br> ;;<br> esac<br>done</p><p>shift $((OPTIND-1))</p><p>[ "$1" = "--" ] &amp;&amp; shift</p><p># ask for setting input if not started with -d<br>if [ "$default" != "true" ]; then<br> lines=$(cat settings/volumes.rc)<br> for line in $lines<br> do<br> value=${line#*=}<br> variable=${line%%=*}<br> printf "$variable [$value] "<br> read answer<br> if [ "$answer" == "" ]; then<br> echo "$variable=$value" &gt;&gt; settings/volumes.rc.tmp<br> else<br> echo "$variable=$answer" &gt;&gt; settings/volumes.rc.tmp<br> fi<br> done<br> cp settings/volumes.rc settings/volumes.rc.previous<br> mv settings/volumes.rc.tmp settings/volumes.rc<br>fi</p><p># export settings for envsusbt<br>lines=$(cat settings/volumes.rc)<br>for line in $lines<br>do<br> export $line<br>done</p><p># build images<br>echo "[info] Building Image: ${IMAGE_NGINX_PROXY}"<br>docker build -t ${IMAGE_NGINX_PROXY} nginx-proxy</p><p>echo "[info] Building Image: ${IMAGE_SONAR_POSTGRES}"<br>docker build -t ${IMAGE_SONAR_POSTGRES} sonarqube/postgres</p><p>echo "[info] Building Image: ${IMAGE_SONARQUBE}"<br>docker build -t ${IMAGE_SONARQUBE} sonarqube/sonarqube</p><p>echo "[info] Building Image: ${IMAGE_ARTIFACTORY}"<br>docker build -t ${IMAGE_ARTIFACTORY} artifactory</p><p>echo "[info] Building Image: ${IMAGE_JENKINS}"<br>docker build -t ${IMAGE_JENKINS} jenkins</p><p># replace variables in docker-compose file<br>cp docker-compose.yml docker-compose.yml.template<br>envsubst &lt; docker-compose.yml &gt; docker-compose.yml.tmp<br>mv docker-compose.yml.tmp docker-compose.yml<br># start infrastructure<br>docker-compose up -d<br># move defaults and backups into place<br>echo "[info] backing up docker-compose.yml of this run to docker-compose.yml.previous"<br>cp docker-compose.yml docker-compose.yml.previous<br>mv docker-compose.yml.template docker-compose.yml</p><p># push images to registry<br>echo "[info] Pushing Image: ${IMAGE_NGINX_PROXY}"<br>docker push ${IMAGE_NGINX_PROXY}</p><p>echo "[info] Pushing Image: ${IMAGE_SONAR_POSTGRES}"<br>docker push ${IMAGE_SONAR_POSTGRES}</p><p>echo "[info] Pushing Image: ${IMAGE_SONARCUBE}"<br>docker push ${IMAGE_SONARCUBE}</p><p>echo "[info] Pushing Image: ${IMAGE_JENKINS}"<br>docker push ${IMAGE_JENKINS}</p><p>echo "[info] Pushing Image: ${IMAGE_ARTIFACTORY}"<br>docker push ${IMAGE_ARTIFACTORY}<br>&lt;/pre&gt;</p><p>You can look into the rest [here](https://simonopitz.me/content/images/2015/infrastructure.zip). I've packaged up all the whole scripts and stuff to get your build server up and running with just a few tweaks. Need help? Just tweet me at [@_sopitz](https://twitter.com/_sopitz). We at [eForce21](http://www.eforce21.com) love to help you.</p><p># Gitlab with Google OAuth<br>That's what you need to do to get a Gitlab running with OAuth from Google.</p><p>* Login to your [Google Developer Console](https://console.developers.google.com/) <br>* create a new project, e. g. gitlab<br>* configure the OAuth screen (APIs and authentication)<br>* generate login data<br>* configure Google-API</p><p>I guess you want to secure the traffic to your Gitlab via SSL.</p><p>&lt;pre&gt;<br>mkdir -p /etc/nginx/ssl<br>cd /etc/nginx/ssl<br>openssl genrsa -out your_domain.key 2048<br>openssl req -new -x509 -key your_domain.key -out your_domain.crt -days 1095<br>&lt;/pre&gt;</p><p>You can also get a certificate from [Let's encrypt](http://letsencrypt.org). Let's Encrypt certificate handling will be covered by a blog post over at the [eForce21 Blog](http://www.eforce21.com/blog/).</p><p>If you haven't started your nginx-proxy already with the setup I posted earlier, you should do that now.</p><p>&lt;pre&gt;<br>docker run -d -v /etc/nginx/certs:/etc/nginx/certs -v /var/run/docker.sock:/tmp/docker.sock --security-opt=label:type:docker_t -p 80:80 -p 443:443 --name nginx-proxy jwilder/nginx-proxy<br>&lt;/pre&gt;</p><p>You only need one reverse proxy per IP. It will create name based virtual hosts for you and distribute the traffic to the appropriate applications.</p><p>Now we need to start Gitlab itself. We use `docker-compose`for this:<br>&lt;pre&gt;<br>postgresql:<br> image: sameersbn/postgresql:9.4-3<br> environment:<br> - DB_USER=gitlab_user<br> - DB_PASS=gitlab_password<br> - DB_NAME=gitlabdb<br> volumes:<br> - /var/lib/docker-data/gitlab/postgresql:/var/lib/postgresql<br>gitlab:<br> image: sameersbn/gitlab:7.14.1<br> links:<br> - redis:redisio<br> - postgresql:postgresql<br> ports:<br> - "2222:22”<br> environment:<br> - TZ=Europe/Berlin<br> - GITLAB_TIMEZONE=Berlin<br> - GITLAB_HTTPS=true<br> - GITLAB_HOST=your_host<br> - GITLAB_PORT=443<br> - GITLAB_SSH_PORT=2222<br> - GITLAB_EMAIL=your_email<br> - GITLAB_EMAIL_REPLY_TO=your_email<br> - VIRTUAL_HOST=git.dev.eforce21.com<br> - OAUTH_GOOGLE_API_KEY=client_id<br> - OAUTH_GOOGLE_APP_SECRET=client_key<br> - OAUTH_GOOGLE_RESTRICT_DOMAIN=restrict_domain<br> - OAUTH_ALLOW_SSO=true<br> - OAUTH_BLOCK_AUTO_CREATED_USERS=false<br> volumes:<br> - /var/lib/docker-data/gitlab/gitlab:/home/git/data<br>redis:<br> image: sameersbn/redis:latest<br> volumes:<br> - /var/lib/docker-data/gitlab/redis:/var/lib/redis<br>&lt;/pre&gt;</p><p>And then start it with `docker-compose up -d`. Once it's started you can log in with the admin: root:5iveL!fe<br>You will have to change that password after login.</p><p># phensley/docker-dns<br>That's what we sometimes use when we cannot use `docker-compose`. It will help you to achieve a name based linking system via DNS. Docker will only allow an IP based linking and that has proven to be not flexible enough at times. You will always have to restart more containers than necessary for your update and get that running with phensleys docker-dns container will make more complex setups without `docker-compose` very flexible.</p><p>Any comments or need help? Just tweet me at [@_sopitz](https://twitter.com/_sopitz). We at [eForce21](http://www.eforce21.com) love to help you.</p></div></article></section></div><section id="3" class="Section Section--components-2 Section--footer color-bg color-title z-30 p-1 ls-p-h-2vw  colors-dark colors-global " data-reactid="54"><div class="fx-1 bd-none ls-bd-r ls-bd-w-1" data-reactid="55"><div class="Group Group-heading ls-p-r-4" data-reactid="56"><div class="Site-title color-text-pop" data-reactid="57"><span data-reactid="58"><a href="index.html" class="m-r-1 m-b-1 v-a-m d-ib" data-reactid="59"><img src="https://the-grid-user-content.s3-us-west-2.amazonaws.com/9ff4a1f7-0bca-4acf-90aa-c24a124e27f5.jpg" class="h-2rem w-a" data-reactid="60"/></a><h2 data-reactid="61"><a data-reactid="62">Luminoso Consulting</a></h2></span></div></div></div><div class="fx-1" data-reactid="63"><div class="Group Group--links" data-reactid="64"><div class="Group Group--links f-s-m ls-f-s-s w-s-wrap ls-w-s-nowrap" data-reactid="65"><div class="Link" data-reactid="66"><a data-reactid="67">Simon OPitz</a></div></div></div></div><div data-reactid="68"></div></section></div></div>
    <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/scripts/placeholder.js"></script>
    <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/scripts/hero-transition.js"></script>
  <script src="https://cdn.thegrid.io/design-systems/the-composer/ds-nick-jones/v0.0.108/assets/scripts/navLeft.js"></script><script id="pageReactInitState">window.pageReactInitState = {"globalComponentsKey":"dsNickJones","items":{"site-navigation-item":{"id":"site-navigation-item","index":0,"metadata":{"@type":"navigation","starred":true},"content":[{"id":"site-navigation-block","type":"navigation","html":"","metadata":{"starred":true},"navigation":[{"href":"index.html","title":"Shining a light in IT","rel":"home","type":"MainPage"}]}]},"header-item-0":{"id":"header-item-0","index":1,"metadata":{"@type":"header","starred":true},"content":[{"id":"cta-title-1","type":"h1","html":"<h1>Shining a light in IT</h1>","metadata":{"starred":true},"text":"Shining a light in IT"}]},"25d49f46-3619-4d21-bdc8-be453c3b3bcc":{"id":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","index":2,"created_by":"f64ca813-26db-43f6-bc7f-f5457803101a","updated_by":"f64ca813-26db-43f6-bc7f-f5457803101a","created_at":"2016-08-03T15:14:19.672Z","updated_at":"2016-08-03T15:17:05.592Z","published":true,"score":0,"path":"_posts/2016-08-03-how-do-we-use-docker-review-pt-5.md","_title":"How do we use Docker? (Review Pt. 5)","metadata":{"@type":"MediaObject","url":"how-do-we-use-docker-review-pt-5/index.html","starred":false,"hasPage":true,"title":"How do we use Docker? (Review Pt. 5)","description":"We at [eForce21](http://www.eforce21.com) use Docker in various customer projects as well as for our own infrastructure. I want to give you some real life `Dockerfile`s and `docker-compose.yml`s that give you an idea of what you can do with docker. Hint: not all of those examples will automatically work out of the box for you guys because some of the `Dockerfiles` cannot be published due to NDAs and confidentiality concerns. But please just leave me a comment or a tweet at [@_sopitz](https://twitter.com/_sopitz). I'm happy to help.","via":{"url":"https://simonopitz.me"},"publisher":{"name":"Simon Opitz"}},"content":[{"id":"b5cdcbab-de15-40d5-971f-81209efdb10a","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"image","html":"<img src=\"https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/0507d28f674bb3adc540eedb888c0cb8/croprotate.png?cropheight=621&cropwidth=1400&degrees=0&input=https%3A%2F%2Fthe-grid-user-content.s3-us-west-2.amazonaws.com%2F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png&x=0&y=40\">","created_at":"2016-08-03T15:15:40.484Z","updated_at":"2016-08-03T15:17:05.592Z","metadata":{"@type":"Article","isBasedOnUrl":"https://the-grid-user-content.s3-us-west-2.amazonaws.com/2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png","starred":true,"via":null,"publisher":{"name":"Simon Opitz"}},"cover":{"src":"https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/1855025d94e6b062577136e4ed47eb08/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&width=1400","original":"https://the-grid-user-content.s3-us-west-2.amazonaws.com/2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png","imgflosrc":"https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/0507d28f674bb3adc540eedb888c0cb8/croprotate.png?cropheight=621&cropwidth=1400&degrees=0&input=https%3A%2F%2Fthe-grid-user-content.s3-us-west-2.amazonaws.com%2F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png&x=0&y=40","pictureImgfloUrls":[{"width":1440,"src":"https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/1855025d94e6b062577136e4ed47eb08/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&width=1400"},{"width":1280,"src":"https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/7b8acf6b751ece59d4020b0cd489366f/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&width=1280"},{"width":720,"src":"https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/d5cbfa25b8dda054883a3492412d365a/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&width=720"},{"width":360,"src":"https://imgflo.herokuapp.com/graph/vahj1ThiexotieMo/6bdf1139ad497e8affe2937b9aff0cfb/insta_hefe.png?input=https%3A%2F%2Fimgflo.herokuapp.com%2Fgraph%2Fvahj1ThiexotieMo%2F0507d28f674bb3adc540eedb888c0cb8%2Fcroprotate.png%3Fcropheight%3D621%26cropwidth%3D1400%26degrees%3D0%26input%3Dhttps%253A%252F%252Fthe-grid-user-content.s3-us-west-2.amazonaws.com%252F2a24c345-a51e-4cd8-b985-11f31d1b2e3c.png%26x%3D0%26y%3D40&width=360"}],"resized":"http://the-grid-user-content.s3-us-west-2.amazonaws.com/caliper-resized/893a0619aaa83da366ff5a7f7e8deb13.png","ratio":"512:227","aspect":2.2555066079295156,"orientation":"landscape","width":1400,"height":621,"rotation":0,"animated":false,"faces":[{"x":1282.421875,"y":538.671875,"width":35.546875,"height":35.546875,"confidence":5.017985},{"x":151.7578125,"y":41.015625,"width":164.0625,"height":164.0625,"confidence":5.011877}],"colors":[[255,255,255],[36,46,55],[58,154,195],[197,78,64],[223,182,73]],"saliency":{"bounding_rect":[[259.765625,35.546875],[1327.5390625,619.3359375]],"confidence":0.567041,"center":[552.34375,449.8046875],"radius":305.197265625},"exif":{"exif":{}}}},{"id":"5977f43a-866e-4ca7-a088-c29341944154","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"h2","html":"<h2>How do we use Docker? (Review Pt. 5)</h2>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"How do we use Docker? (Review Pt. 5)"},{"id":"58f7b22a-c3a2-4cd8-8911-e3aeb27dc867","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>We at [eForce21](http://www.eforce21.com) use Docker in various customer projects as well as for our own infrastructure. I want to give you some real life `Dockerfile`s and `docker-compose.yml`s that give you an idea of what you can do with docker. Hint: not all of those examples will automatically work out of the box for you guys because some of the `Dockerfiles` cannot be published due to NDAs and confidentiality concerns. But please just leave me a comment or a tweet at [@_sopitz](https://twitter.com/_sopitz). I'm happy to help.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"We at [eForce21](http://www.eforce21.com) use Docker in various customer projects as well as for our own infrastructure. I want to give you some real life `Dockerfile`s and `docker-compose.yml`s that give you an idea of what you can do with docker. Hint: not all of those examples will automatically work out of the box for you guys because some of the `Dockerfiles` cannot be published due to NDAs and confidentiality concerns. But please just leave me a comment or a tweet at [@_sopitz](https://twitter.com/_sopitz). I'm happy to help."},{"id":"62e15d28-7398-4760-aaad-310163a64ec2","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p># jwilder/nginx-proxy<br>[That's](https://github.com/jwilder/nginx-proxy) our magical tool. We reverse proxy all our applications on our servers for domain-name, ssl and access management. It will basically do everything for you. You will map the docker socket into the container and it listens for new containers, stopped containers and will perform all the actions necessary to make you happy. Our `Dockerfile` looks like this:</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"# jwilder/nginx-proxy[That's](https://github.com/jwilder/nginx-proxy) our magical tool. We reverse proxy all our applications on our servers for domain-name, ssl and access management. It will basically do everything for you. You will map the docker socket into the container and it listens for new containers, stopped containers and will perform all the actions necessary to make you happy. Our `Dockerfile` looks like this:"},{"id":"d5ee855f-673c-4da8-b78c-0cd0a5299575","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>&lt;pre&gt;<br>FROM jwilder/nginx-proxy</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"<pre>FROM jwilder/nginx-proxy"},{"id":"4ffffd2f-cf27-403c-ba98-2a88fbef2c68","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>COPY config/vhosts/* /etc/nginx/vhost.d/<br>COPY config/global/* /etc/nginx/conf.d/<br>&lt;/pre&gt;</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"COPY config/vhosts/* /etc/nginx/vhost.d/COPY config/global/* /etc/nginx/conf.d/</pre>"},{"id":"9b4a9bb8-ef11-465e-90d5-3729c3016209","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>There is a file in `config/global/` called `proxy.conf` where we've defined a couple of settings that should be applied for all vhosts. E. g. `client_max_body_size 0;` to make sure we can pull and push bigger files to our GitLab or docker-registry.<br>`config/vhosts/` contains files that resemble the name of your vhost (e. g. simonopitz.me for this domain). You can specify settings for a single vhost with these files. When you build the `Dockerfile` all your vhosts will be configured accordingly during the container build. Once the containers are started you will automatically get your vhost-configs generated by jwilders nginx-proxy.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"There is a file in `config/global/` called `proxy.conf` where we've defined a couple of settings that should be applied for all vhosts. E. g. `client_max_body_size 0;` to make sure we can pull and push bigger files to our GitLab or docker-registry.`config/vhosts/` contains files that resemble the name of your vhost (e. g. simonopitz.me for this domain). You can specify settings for a single vhost with these files. When you build the `Dockerfile` all your vhosts will be configured accordingly during the container build. Once the containers are started you will automatically get your vhost-configs generated by jwilders nginx-proxy."},{"id":"5e17cf92-6b13-4b5b-86fb-4397aab573bc","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p># Build-Server<br>We have completely automated the setup of our build server. As we keep all our configurations in a git repository all we have to do is a check out on a machine, run a shell script and the whole server is configured. Even the Jenkins Jobs are put in place correctly and work out of the box. Here is what the structure looks like:<br>![](/content/images/2015/12/docker-usage-eforce-structure3.png)</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"# Build-ServerWe have completely automated the setup of our build server. As we keep all our configurations in a git repository all we have to do is a check out on a machine, run a shell script and the whole server is configured. Even the Jenkins Jobs are put in place correctly and work out of the box. Here is what the structure looks like:![](/content/images/2015/12/docker-usage-eforce-structure3.png)"},{"id":"c64896cf-5677-4873-a229-174b98c5bec3","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>The setup.sh basically does all we need. It collects paths for volumes and all settings, builds images, runs all containers and pushes everything to our registry. But have a look yourself:<br>&lt;pre&gt;<br>#/bin/bash -e<br>. settings/containers.rc<br>. settings/images.rc<br>. settings/volumes.rc</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"The setup.sh basically does all we need. It collects paths for volumes and all settings, builds images, runs all containers and pushes everything to our registry. But have a look yourself:<pre>#/bin/bash -e. settings/containers.rc. settings/images.rc. settings/volumes.rc"},{"id":"9e604a46-d2aa-46b7-b9f6-0925ce46a58b","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>OPTIND=1<br>default=\"false\"<br>while getopts \"d?\" opt; do<br> case \"$opt\" in<br> d ) default=\"true\"<br> ;;<br> esac<br>done</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"OPTIND=1default=\"false\"while getopts \"d?\" opt; do case \"$opt\" in d ) default=\"true\" ;; esacdone"},{"id":"f372b462-76fb-441f-a6d0-00e02f70faf8","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>shift $((OPTIND-1))</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"shift $((OPTIND-1))"},{"id":"9d1b12a7-4f1c-4b0e-b639-36de42505856","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>[ \"$1\" = \"--\" ] &amp;&amp; shift</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"[ \"$1\" = \"--\" ] && shift"},{"id":"72cbe7d4-7e0b-4e43-a177-74847477bac6","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p># ask for setting input if not started with -d<br>if [ \"$default\" != \"true\" ]; then<br> lines=$(cat settings/volumes.rc)<br> for line in $lines<br> do<br> value=${line#*=}<br> variable=${line%%=*}<br> printf \"$variable [$value] \"<br> read answer<br> if [ \"$answer\" == \"\" ]; then<br> echo \"$variable=$value\" &gt;&gt; settings/volumes.rc.tmp<br> else<br> echo \"$variable=$answer\" &gt;&gt; settings/volumes.rc.tmp<br> fi<br> done<br> cp settings/volumes.rc settings/volumes.rc.previous<br> mv settings/volumes.rc.tmp settings/volumes.rc<br>fi</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"# ask for setting input if not started with -dif [ \"$default\" != \"true\" ]; then lines=$(cat settings/volumes.rc) for line in $lines do value=${line#*=} variable=${line%%=*} printf \"$variable [$value] \" read answer if [ \"$answer\" == \"\" ]; then echo \"$variable=$value\" >> settings/volumes.rc.tmp else echo \"$variable=$answer\" >> settings/volumes.rc.tmp fi done cp settings/volumes.rc settings/volumes.rc.previous mv settings/volumes.rc.tmp settings/volumes.rcfi"},{"id":"b79a90fc-7f54-415e-b3d7-34284c9d992e","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p># export settings for envsusbt<br>lines=$(cat settings/volumes.rc)<br>for line in $lines<br>do<br> export $line<br>done</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"# export settings for envsusbtlines=$(cat settings/volumes.rc)for line in $linesdo export $linedone"},{"id":"d71d2fc9-c400-47b7-8f50-7525021dacda","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p># build images<br>echo \"[info] Building Image: ${IMAGE_NGINX_PROXY}\"<br>docker build -t ${IMAGE_NGINX_PROXY} nginx-proxy</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"# build imagesecho \"[info] Building Image: ${IMAGE_NGINX_PROXY}\"docker build -t ${IMAGE_NGINX_PROXY} nginx-proxy"},{"id":"e880b4c4-f517-439d-883c-f5c0adf74f44","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>echo \"[info] Building Image: ${IMAGE_SONAR_POSTGRES}\"<br>docker build -t ${IMAGE_SONAR_POSTGRES} sonarqube/postgres</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"echo \"[info] Building Image: ${IMAGE_SONAR_POSTGRES}\"docker build -t ${IMAGE_SONAR_POSTGRES} sonarqube/postgres"},{"id":"f8671966-c09d-48b4-a946-852e7619b537","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>echo \"[info] Building Image: ${IMAGE_SONARQUBE}\"<br>docker build -t ${IMAGE_SONARQUBE} sonarqube/sonarqube</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"echo \"[info] Building Image: ${IMAGE_SONARQUBE}\"docker build -t ${IMAGE_SONARQUBE} sonarqube/sonarqube"},{"id":"9ff998c8-e11f-4b8d-b0c3-b00fd1abdcc6","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>echo \"[info] Building Image: ${IMAGE_ARTIFACTORY}\"<br>docker build -t ${IMAGE_ARTIFACTORY} artifactory</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"echo \"[info] Building Image: ${IMAGE_ARTIFACTORY}\"docker build -t ${IMAGE_ARTIFACTORY} artifactory"},{"id":"d6d34c0f-b9f8-4882-b664-9e50c60fe156","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>echo \"[info] Building Image: ${IMAGE_JENKINS}\"<br>docker build -t ${IMAGE_JENKINS} jenkins</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"echo \"[info] Building Image: ${IMAGE_JENKINS}\"docker build -t ${IMAGE_JENKINS} jenkins"},{"id":"86999459-e611-4fa9-828f-06c096ca4750","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p># replace variables in docker-compose file<br>cp docker-compose.yml docker-compose.yml.template<br>envsubst &lt; docker-compose.yml &gt; docker-compose.yml.tmp<br>mv docker-compose.yml.tmp docker-compose.yml<br># start infrastructure<br>docker-compose up -d<br># move defaults and backups into place<br>echo \"[info] backing up docker-compose.yml of this run to docker-compose.yml.previous\"<br>cp docker-compose.yml docker-compose.yml.previous<br>mv docker-compose.yml.template docker-compose.yml</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"# replace variables in docker-compose filecp docker-compose.yml docker-compose.yml.templateenvsubst < docker-compose.yml > docker-compose.yml.tmpmv docker-compose.yml.tmp docker-compose.yml# start infrastructuredocker-compose up -d# move defaults and backups into placeecho \"[info] backing up docker-compose.yml of this run to docker-compose.yml.previous\"cp docker-compose.yml docker-compose.yml.previousmv docker-compose.yml.template docker-compose.yml"},{"id":"6e56d3fa-f984-42bd-bcf2-ae2fb8aa563f","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p># push images to registry<br>echo \"[info] Pushing Image: ${IMAGE_NGINX_PROXY}\"<br>docker push ${IMAGE_NGINX_PROXY}</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"# push images to registryecho \"[info] Pushing Image: ${IMAGE_NGINX_PROXY}\"docker push ${IMAGE_NGINX_PROXY}"},{"id":"a9071f8e-a0fb-419c-bc1f-7a841e884172","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>echo \"[info] Pushing Image: ${IMAGE_SONAR_POSTGRES}\"<br>docker push ${IMAGE_SONAR_POSTGRES}</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"echo \"[info] Pushing Image: ${IMAGE_SONAR_POSTGRES}\"docker push ${IMAGE_SONAR_POSTGRES}"},{"id":"6bfd43e2-3c8f-4664-bc54-9236bf670bae","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>echo \"[info] Pushing Image: ${IMAGE_SONARCUBE}\"<br>docker push ${IMAGE_SONARCUBE}</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"echo \"[info] Pushing Image: ${IMAGE_SONARCUBE}\"docker push ${IMAGE_SONARCUBE}"},{"id":"b25c1a1f-2def-495c-9a28-e45416006d52","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>echo \"[info] Pushing Image: ${IMAGE_JENKINS}\"<br>docker push ${IMAGE_JENKINS}</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"echo \"[info] Pushing Image: ${IMAGE_JENKINS}\"docker push ${IMAGE_JENKINS}"},{"id":"f525c868-edc5-431b-b576-ce95ae8c6618","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>echo \"[info] Pushing Image: ${IMAGE_ARTIFACTORY}\"<br>docker push ${IMAGE_ARTIFACTORY}<br>&lt;/pre&gt;</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"echo \"[info] Pushing Image: ${IMAGE_ARTIFACTORY}\"docker push ${IMAGE_ARTIFACTORY}</pre>"},{"id":"81d41690-d6ce-49bf-9db3-76d85ddb5db2","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>You can look into the rest [here](https://simonopitz.me/content/images/2015/infrastructure.zip). I've packaged up all the whole scripts and stuff to get your build server up and running with just a few tweaks. Need help? Just tweet me at [@_sopitz](https://twitter.com/_sopitz). We at [eForce21](http://www.eforce21.com) love to help you.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"You can look into the rest [here](https://simonopitz.me/content/images/2015/infrastructure.zip). I've packaged up all the whole scripts and stuff to get your build server up and running with just a few tweaks. Need help? Just tweet me at [@_sopitz](https://twitter.com/_sopitz). We at [eForce21](http://www.eforce21.com) love to help you."},{"id":"2e953934-0e5d-42cd-8250-f555f56775db","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p># Gitlab with Google OAuth<br>That's what you need to do to get a Gitlab running with OAuth from Google.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"# Gitlab with Google OAuthThat's what you need to do to get a Gitlab running with OAuth from Google."},{"id":"8c8931b4-1a0b-4330-8670-b9a91b459c14","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>* Login to your [Google Developer Console](https://console.developers.google.com/) <br>* create a new project, e. g. gitlab<br>* configure the OAuth screen (APIs and authentication)<br>* generate login data<br>* configure Google-API</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"* Login to your [Google Developer Console](https://console.developers.google.com/) * create a new project, e. g. gitlab* configure the OAuth screen (APIs and authentication)* generate login data* configure Google-API"},{"id":"6764ae4b-4a9e-4401-909e-c3c2a20b940a","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>I guess you want to secure the traffic to your Gitlab via SSL.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"I guess you want to secure the traffic to your Gitlab via SSL."},{"id":"692e78dc-9be2-4472-89ab-86839ca0300d","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>&lt;pre&gt;<br>mkdir -p /etc/nginx/ssl<br>cd /etc/nginx/ssl<br>openssl genrsa -out your_domain.key 2048<br>openssl req -new -x509 -key your_domain.key -out your_domain.crt -days 1095<br>&lt;/pre&gt;</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"<pre>mkdir -p /etc/nginx/sslcd /etc/nginx/sslopenssl genrsa -out your_domain.key 2048openssl req -new -x509 -key your_domain.key -out your_domain.crt -days 1095</pre>"},{"id":"8379c6ef-d73c-43d4-9750-aec7eced4379","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>You can also get a certificate from [Let's encrypt](http://letsencrypt.org). Let's Encrypt certificate handling will be covered by a blog post over at the [eForce21 Blog](http://www.eforce21.com/blog/).</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"You can also get a certificate from [Let's encrypt](http://letsencrypt.org). Let's Encrypt certificate handling will be covered by a blog post over at the [eForce21 Blog](http://www.eforce21.com/blog/)."},{"id":"dae59280-f0fc-4388-931b-23fe9ce9c4e5","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>If you haven't started your nginx-proxy already with the setup I posted earlier, you should do that now.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"If you haven't started your nginx-proxy already with the setup I posted earlier, you should do that now."},{"id":"6a63075d-4f5d-4c76-b1d8-68b363ac926d","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>&lt;pre&gt;<br>docker run -d -v /etc/nginx/certs:/etc/nginx/certs -v /var/run/docker.sock:/tmp/docker.sock --security-opt=label:type:docker_t -p 80:80 -p 443:443 --name nginx-proxy jwilder/nginx-proxy<br>&lt;/pre&gt;</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"<pre>docker run -d -v /etc/nginx/certs:/etc/nginx/certs -v /var/run/docker.sock:/tmp/docker.sock --security-opt=label:type:docker_t -p 80:80 -p 443:443 --name nginx-proxy jwilder/nginx-proxy</pre>"},{"id":"d6d4efb9-0a3c-4070-a9cc-c4c5def00d2e","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>You only need one reverse proxy per IP. It will create name based virtual hosts for you and distribute the traffic to the appropriate applications.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"You only need one reverse proxy per IP. It will create name based virtual hosts for you and distribute the traffic to the appropriate applications."},{"id":"720653fd-650f-4fe6-9c20-151fcb571424","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>Now we need to start Gitlab itself. We use `docker-compose`for this:<br>&lt;pre&gt;<br>postgresql:<br> image: sameersbn/postgresql:9.4-3<br> environment:<br> - DB_USER=gitlab_user<br> - DB_PASS=gitlab_password<br> - DB_NAME=gitlabdb<br> volumes:<br> - /var/lib/docker-data/gitlab/postgresql:/var/lib/postgresql<br>gitlab:<br> image: sameersbn/gitlab:7.14.1<br> links:<br> - redis:redisio<br> - postgresql:postgresql<br> ports:<br> - \"2222:22”<br> environment:<br> - TZ=Europe/Berlin<br> - GITLAB_TIMEZONE=Berlin<br> - GITLAB_HTTPS=true<br> - GITLAB_HOST=your_host<br> - GITLAB_PORT=443<br> - GITLAB_SSH_PORT=2222<br> - GITLAB_EMAIL=your_email<br> - GITLAB_EMAIL_REPLY_TO=your_email<br> - VIRTUAL_HOST=git.dev.eforce21.com<br> - OAUTH_GOOGLE_API_KEY=client_id<br> - OAUTH_GOOGLE_APP_SECRET=client_key<br> - OAUTH_GOOGLE_RESTRICT_DOMAIN=restrict_domain<br> - OAUTH_ALLOW_SSO=true<br> - OAUTH_BLOCK_AUTO_CREATED_USERS=false<br> volumes:<br> - /var/lib/docker-data/gitlab/gitlab:/home/git/data<br>redis:<br> image: sameersbn/redis:latest<br> volumes:<br> - /var/lib/docker-data/gitlab/redis:/var/lib/redis<br>&lt;/pre&gt;</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"Now we need to start Gitlab itself. We use `docker-compose`for this:<pre>postgresql: image: sameersbn/postgresql:9.4-3 environment: - DB_USER=gitlab_user - DB_PASS=gitlab_password - DB_NAME=gitlabdb volumes: - /var/lib/docker-data/gitlab/postgresql:/var/lib/postgresqlgitlab: image: sameersbn/gitlab:7.14.1 links: - redis:redisio - postgresql:postgresql ports: - \"2222:22” environment: - TZ=Europe/Berlin - GITLAB_TIMEZONE=Berlin - GITLAB_HTTPS=true - GITLAB_HOST=your_host - GITLAB_PORT=443 - GITLAB_SSH_PORT=2222 - GITLAB_EMAIL=your_email - GITLAB_EMAIL_REPLY_TO=your_email - VIRTUAL_HOST=git.dev.eforce21.com - OAUTH_GOOGLE_API_KEY=client_id - OAUTH_GOOGLE_APP_SECRET=client_key - OAUTH_GOOGLE_RESTRICT_DOMAIN=restrict_domain - OAUTH_ALLOW_SSO=true - OAUTH_BLOCK_AUTO_CREATED_USERS=false volumes: - /var/lib/docker-data/gitlab/gitlab:/home/git/dataredis: image: sameersbn/redis:latest volumes: - /var/lib/docker-data/gitlab/redis:/var/lib/redis</pre>"},{"id":"5774b76d-f515-4497-b255-18299e72540f","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>And then start it with `docker-compose up -d`. Once it's started you can log in with the admin: root:5iveL!fe<br>You will have to change that password after login.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"And then start it with `docker-compose up -d`. Once it's started you can log in with the admin: root:5iveL!feYou will have to change that password after login."},{"id":"b664cf9a-ace8-463a-a93f-e5d4ea168f39","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p># phensley/docker-dns<br>That's what we sometimes use when we cannot use `docker-compose`. It will help you to achieve a name based linking system via DNS. Docker will only allow an IP based linking and that has proven to be not flexible enough at times. You will always have to restart more containers than necessary for your update and get that running with phensleys docker-dns container will make more complex setups without `docker-compose` very flexible.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"# phensley/docker-dnsThat's what we sometimes use when we cannot use `docker-compose`. It will help you to achieve a name based linking system via DNS. Docker will only allow an IP based linking and that has proven to be not flexible enough at times. You will always have to restart more containers than necessary for your update and get that running with phensleys docker-dns container will make more complex setups without `docker-compose` very flexible."},{"id":"39b7429c-eac3-452b-957b-e5052bc81e6d","item":"25d49f46-3619-4d21-bdc8-be453c3b3bcc","type":"text","html":"<p>Any comments or need help? Just tweet me at [@_sopitz](https://twitter.com/_sopitz). We at [eForce21](http://www.eforce21.com) love to help you.</p>","src":null,"created_at":"2016-08-03T15:17:05.592Z","updated_at":null,"metadata":{"starred":true},"text":"Any comments or need help? Just tweet me at [@_sopitz](https://twitter.com/_sopitz). We at [eForce21](http://www.eforce21.com) love to help you."}]},"site-footer-item":{"id":"site-footer-item","index":3,"metadata":{"@type":"footer","starred":true},"content":[{"id":"site-footer-block","type":"footer","html":"","metadata":{"starred":true},"footer":{"rss":{"href":"rss.xml","rel":"alternate","title":"Shining a light in IT RSS","type":"application/rss+xml"}}}]}},"sections":[{"componentId":"ArticleSiteHeaderFallback","itemsToRenderIds":["header-item-0"],"contracts":{"the-beautician":{"$item_index":1,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-center"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-none"]}},"$class":["group-graphical-shape-none","group-order-normal","text-align-center","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","header-item-0","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","ArticleSiteHeaderFallback"]},"the-colorist":{"$item_index":1,"colorverse":{"colors-solution":{"$class":["colors-dark"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-dark","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":false,"isDark":true,"lightnessClass":"is-dark","base":{"r":25,"g":25,"b":23},"bg":{"r":24,"g":24,"b":22},"box":{"r":25,"g":25,"b":23},"boxShadow":{"r":0,"g":0,"b":0,"a":0.3},"boxPop":{"r":100,"g":182,"b":172},"boxPopText":{"r":0,"g":0,"b":0},"boxPop2":{"r":41,"g":108,"b":103},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":0,"g":0,"b":0},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":54,"g":226,"b":206},"boxPopMostVibrantText":{"r":0,"g":0,"b":0},"selectionText":{"r":255,"g":255,"b":255},"selection":{"r":218,"g":71,"b":101,"a":0.5},"header":{"r":25,"g":25,"b":23},"zebraStripe":{"r":28,"g":28,"b":26},"line":{"r":42,"g":42,"b":40},"mediaBorder":{"css":"1px solid hsl(60, 2%, 16%)","width":1,"type":"solid","color":{"r":42,"g":42,"b":40}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.4},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.4)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.4},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":220,"g":239,"b":237},"title2":{"r":162,"g":175,"b":173},"subTitle":{"r":90,"g":90,"b":89},"text":{"r":243,"g":243,"b":242},"text2":{"r":178,"g":178,"b":176},"textShadow":{"r":13,"g":13,"b":12,"a":0.5},"textShadowProps":{"color":{"r":13,"g":13,"b":12,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":225,"g":108,"b":132},"textPop2":{"r":145,"g":203,"b":196},"meta":{"r":90,"g":90,"b":89},"metaHover":{"r":103,"g":103,"b":101},"icon":{"r":225,"g":108,"b":132},"iconSelected":{"r":225,"g":108,"b":132},"iconOver":{"r":225,"g":108,"b":132},"palette":[{"r":255,"g":255,"b":255},{"r":25,"g":25,"b":23},{"r":41,"g":108,"b":103},{"r":100,"g":182,"b":172},{"r":218,"g":71,"b":101}]}},"the-lensman":{"filter":{"$class":["passthrough"],"graph":"passthrough","config":null}},"itemsClasses":["header-item-0","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:colors-global","site:colors-light"],"componentClasses":["ArticleSiteHeaderFallback"]},"sectionIndex":0},{"componentId":"ArticleHero","itemsToRenderIds":["25d49f46-3619-4d21-bdc8-be453c3b3bcc"],"contracts":{"the-beautician":{"$item_index":2,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-center"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-none"]}},"$class":["group-graphical-shape-none","group-order-normal","text-align-center","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","25d49f46-3619-4d21-bdc8-be453c3b3bcc","item:w-publisher","item:w-attribution","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:w-cover-face","item:w-cover-saliency","item:w-cover-landscape","item:w-cover-high-res","ArticleHero"]},"the-colorist":{"$item_index":2,"colorverse":{"colors-solution":{"$class":["colors-dark"]},"colors-locality":{"$class":["colors-local"]}},"$class":["colors-local","colors-dark","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":false,"isDark":true,"lightnessClass":"is-dark","base":{"r":36,"g":46,"b":55},"bg":{"r":22,"g":28,"b":34},"box":{"r":24,"g":31,"b":37},"boxShadow":{"r":0,"g":0,"b":0,"a":0.3},"boxPop":{"r":58,"g":154,"b":195},"boxPopText":{"r":0,"g":0,"b":0},"boxPop2":{"r":197,"g":78,"b":64},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":0,"g":0,"b":0},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":54,"g":146,"b":226},"boxPopMostVibrantText":{"r":255,"g":255,"b":255},"selectionText":{"r":255,"g":255,"b":255},"selection":{"r":54,"g":146,"b":226,"a":0.5},"header":{"r":23,"g":30,"b":36},"zebraStripe":{"r":27,"g":34,"b":40},"line":{"r":41,"g":47,"b":53},"mediaBorder":{"css":"1px solid hsl(210, 13%, 18%)","width":1,"type":"solid","color":{"r":41,"g":47,"b":53}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.4},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.4)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.4},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":247,"g":238,"b":212},"title2":{"r":180,"g":176,"b":159},"subTitle":{"r":89,"g":95,"b":99},"text":{"r":240,"g":242,"b":245},"text2":{"r":175,"g":179,"b":183},"textShadow":{"r":12,"g":16,"b":19,"a":0.5},"textShadowProps":{"color":{"r":12,"g":16,"b":19,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":230,"g":197,"b":112},"textPop2":{"r":97,"g":174,"b":207},"meta":{"r":89,"g":95,"b":99},"metaHover":{"r":104,"g":111,"b":115},"icon":{"r":230,"g":197,"b":112},"iconSelected":{"r":230,"g":197,"b":112},"iconOver":{"r":230,"g":197,"b":112},"palette":[{"r":255,"g":255,"b":255},{"r":36,"g":46,"b":55},{"r":58,"g":154,"b":195},{"r":197,"g":78,"b":64},{"r":223,"g":182,"b":73}]}},"the-lensman":{"filter":{"$class":["insta_hefe"],"graph":"insta_hefe","config":null}},"itemsClasses":["25d49f46-3619-4d21-bdc8-be453c3b3bcc","item:w-publisher","item:w-attribution","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:w-cover-face","item:w-cover-saliency","item:w-cover-landscape","item:w-cover-high-res"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:colors-global","site:colors-light"],"componentClasses":["ArticleHero"]},"sectionIndex":1}],"contracts":{"the-typographer":{"typography":{"fonts":{"display":{"$formality":-0.4545454545454546,"$type":["sans","humanist"],"$weight":2,"$width":2,"$xheight":2,"$contrast":2,"$caps":"normal","family":"Source Sans Pro","name":"Source Sans Pro","foundry":"google","license":"ofl","similar_to":["Seravek","Revisal"],"description":"Source® Sans Pro, Adobe first open source typeface family, was designed\nby Paul D. Hunt. It is a sans serif typeface intended to work well in user\ninterfaces.","links":["https://www.google.com/fonts/specimen/Source+Sans+Pro","https://www.typewolf.com/site-of-the-day/fonts/source-sans-pro"],"normal":4,"bold":7},"screen":{"$formality":-0.4545454545454546,"$type":["sans","humanist"],"$weight":2,"$width":2,"$xheight":2,"$contrast":2,"$caps":"normal","family":"Varela Round","name":"Varela Round","foundry":"google","license":"ofl","similar_to":["Bryant","DIN Round"],"description":"Varela Round is based on the well known font Varela. Its rounded corners\nmake it perfect for a soft feel and work great at any size. It is suitable for\nheadlines and printed collateral, and maintains its distinct properties amongst\nother objects. Varela Round is a great font for any website.","links":["https://www.google.com/fonts/specimen/Varela+Round","https://www.typewolf.com/site-of-the-day/fonts/varela-round"],"normal":4,"bold":7}},"styles":"html { font-family: '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } html.wf-active { font-family: 'Varela Round', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-title, .wf-active .font-headline, .wf-active .font-h1, .wf-active .font-h2, .wf-active .font-h3 { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-subtitle, .wf-active .font-h4, .wf-active .font-h5, .wf-active .font-h6 { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 700; } .wf-active .font-text, .wf-active .font-list { font-family: 'Varela Round', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; } .wf-active .font-quote { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400;font-style: italic; } .wf-active .font-cta { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; }","webfontconfig":{"google":{"families":["Source Sans Pro:400,700","Varela Round:400,400italic,700,700italic"]}}},"htmlStyleTagContent":"html { font-family: '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } html.wf-active { font-family: 'Varela Round', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-title, .wf-active .font-headline, .wf-active .font-h1, .wf-active .font-h2, .wf-active .font-h3 { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400; } .wf-active .font-subtitle, .wf-active .font-h4, .wf-active .font-h5, .wf-active .font-h6 { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 700; } .wf-active .font-text, .wf-active .font-list { font-family: 'Varela Round', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; } .wf-active .font-quote { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif';font-weight: 400;font-style: italic; } .wf-active .font-cta { font-family: 'Source Sans Pro', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Roboto', 'Segoe UI', 'Helvetica Neue', 'Lucida Grande', 'sans-serif'; }","htmlScriptTagContent":"\n      if (window.WebFont) {\n        WebFont.load({\"google\":{\"families\":[\"Source Sans Pro:400,700\",\"Varela Round:400,400italic,700,700italic\"]}});\n      }\n    "},"the-beautician":{"$item_index":0,"siteBeautyverse":{"design-style":{"$class":["Brockmann"]},"section-h-padding":{"$class":["section-h-padding-small"]},"section-v-padding":{"$class":["section-v-padding-small"]},"hero-transition":{"$class":["hero-transition-none"]}},"$class":["hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:w-multiple-item"]},"the-colorist":{"$item_index":0,"colorverse":{"colors-solution":{"$class":["colors-light"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-light","site:w-multiple-item"],"colorsSolution":{"isLight":true,"isDark":false,"lightnessClass":"is-light","base":{"r":255,"g":255,"b":255},"bg":{"r":247,"g":247,"b":247},"box":{"r":255,"g":255,"b":255},"boxShadow":{"r":0,"g":0,"b":0,"a":0.1},"boxPop":{"r":41,"g":108,"b":103},"boxPopText":{"r":255,"g":255,"b":255},"boxPop2":{"r":100,"g":182,"b":172},"boxPop2Text":{"r":0,"g":0,"b":0},"boxPopTextHover":{"r":204,"g":204,"b":204},"boxPop2TextHover":{"r":0,"g":0,"b":0},"boxPopMostVibrant":{"r":54,"g":226,"b":206},"boxPopMostVibrantText":{"r":0,"g":0,"b":0},"selectionText":{"r":0,"g":0,"b":0},"selection":{"r":54,"g":226,"b":206,"a":0.5},"header":{"r":253,"g":253,"b":253},"zebraStripe":{"r":252,"g":252,"b":252},"line":{"r":238,"g":238,"b":238},"mediaBorder":{"css":"1px solid hsl(0, 0%, 93%)","width":1,"type":"solid","color":{"r":238,"g":238,"b":238}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.2},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.2)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.2},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":28,"g":74,"b":71},"title2":{"r":96,"g":128,"b":126},"subTitle":{"r":186,"g":186,"b":185},"text":{"r":24,"g":24,"b":22},"text2":{"r":140,"g":140,"b":139},"textShadow":{"r":255,"g":255,"b":255,"a":0.5},"textShadowProps":{"color":{"r":255,"g":255,"b":255,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":185,"g":60,"b":86},"textPop2":{"r":41,"g":108,"b":103},"meta":{"r":186,"g":186,"b":185},"metaHover":{"r":159,"g":159,"b":157},"icon":{"r":185,"g":60,"b":86},"iconSelected":{"r":185,"g":60,"b":86},"iconOver":{"r":185,"g":60,"b":86},"palette":[{"r":255,"g":255,"b":255},{"r":25,"g":25,"b":23},{"r":41,"g":108,"b":103},{"r":100,"g":182,"b":172},{"r":218,"g":71,"b":101}]}}},"siteData":{"id":"ea864422-9b4b-4bbb-afe0-52fb58533664","ordered":true,"site":"the-domains/sopitz","title":"How do we use Docker? (Review Pt. 5)","navigable":false,"type":"permalink","siteUrl":"https://thegrid.ai/sopitz/","siteId":"736b52b7-bf3f-465b-b168-ca19b8e123b8","user":"f64ca813-26db-43f6-bc7f-f5457803101a","config":{"name":"Luminoso Consulting","title":"Shining a light in IT","style":"the-composer","favicon":null,"logo":"https://the-grid-user-content.s3-us-west-2.amazonaws.com/9ff4a1f7-0bca-4acf-90aa-c24a124e27f5.jpg","cta":{"bucket":null,"version":null,"domain":null},"analytics":{"twitter":null,"google":null,"facebook":null},"opengraph":{"image":null,"type":null,"appId":null},"collections":[{"index":{"path":"/","number":15,"paginate":true,"navigable":true},"permalink":{"path":"/:title/"},"feed":{"path":"/rss.xml","format":"rss","number":10}}],"color":{"saturation":0.8891937653534114,"brandStrength":0.7093041196931154,"lightness":0.5288254385814071,"brandColors":["#FFFFFF","#191917","#296C67","#64B6AC","#DA4765"],"rhythmicContrast":0.25332957901991904},"layout_spectrum":0.8293964678887278,"typography_spectrum":0.13897636346518993,"author":{"name":"Simon OPitz","email":"simon.opitz@luminoso-consulting.de","url":"luminoso-consulting.de"}},"navigation":[{"href":"index.html","title":"Shining a light in IT","rel":"home","type":"MainPage"}],"links":[{"href":"rss.xml","rel":"alternate","title":"Shining a light in IT RSS","type":"application/rss+xml"},{"href":"luminoso-consulting.de","rel":"me","title":"Simon OPitz","type":"text/html"}]},"navigation":{"componentId":"NavLeftColumn","itemsToRenderIds":["site-navigation-item"],"contracts":{"the-beautician":{"$item_index":0,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-center"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-circle"]}},"$class":["group-graphical-shape-circle","group-order-normal","text-align-center","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site-navigation-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-navigation","NavLeftColumn"]},"the-colorist":{"$item_index":0,"colorverse":{"colors-solution":{"$class":["colors-light"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-light","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":true,"isDark":false,"lightnessClass":"is-light","base":{"r":255,"g":255,"b":255},"bg":{"r":247,"g":247,"b":247},"box":{"r":255,"g":255,"b":255},"boxShadow":{"r":0,"g":0,"b":0,"a":0.1},"boxPop":{"r":41,"g":108,"b":103},"boxPopText":{"r":255,"g":255,"b":255},"boxPop2":{"r":100,"g":182,"b":172},"boxPop2Text":{"r":0,"g":0,"b":0},"boxPopTextHover":{"r":204,"g":204,"b":204},"boxPop2TextHover":{"r":0,"g":0,"b":0},"boxPopMostVibrant":{"r":54,"g":226,"b":206},"boxPopMostVibrantText":{"r":0,"g":0,"b":0},"selectionText":{"r":0,"g":0,"b":0},"selection":{"r":54,"g":226,"b":206,"a":0.5},"header":{"r":253,"g":253,"b":253},"zebraStripe":{"r":252,"g":252,"b":252},"line":{"r":238,"g":238,"b":238},"mediaBorder":{"css":"1px solid hsl(0, 0%, 93%)","width":1,"type":"solid","color":{"r":238,"g":238,"b":238}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.2},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.2)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.2},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":28,"g":74,"b":71},"title2":{"r":96,"g":128,"b":126},"subTitle":{"r":186,"g":186,"b":185},"text":{"r":24,"g":24,"b":22},"text2":{"r":140,"g":140,"b":139},"textShadow":{"r":255,"g":255,"b":255,"a":0.5},"textShadowProps":{"color":{"r":255,"g":255,"b":255,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":185,"g":60,"b":86},"textPop2":{"r":41,"g":108,"b":103},"meta":{"r":186,"g":186,"b":185},"metaHover":{"r":159,"g":159,"b":157},"icon":{"r":185,"g":60,"b":86},"iconSelected":{"r":185,"g":60,"b":86},"iconOver":{"r":185,"g":60,"b":86},"palette":[{"r":255,"g":255,"b":255},{"r":25,"g":25,"b":23},{"r":41,"g":108,"b":103},{"r":100,"g":182,"b":172},{"r":218,"g":71,"b":101}]}},"the-lensman":{"filter":{"$class":["passthrough"],"graph":"passthrough","config":null}},"itemsClasses":["site-navigation-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-navigation"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:colors-global","site:colors-light"],"componentClasses":["NavLeftColumn"]}},"footer":{"componentId":"Footer3col","itemsToRenderIds":["site-footer-item"],"contracts":{"the-beautician":{"$item_index":3,"sectionsBeautyverse":{"section-height":{"$class":["section-height-fullscreen"]},"text-align":{"$class":["text-align-center"]},"group-order":{"$class":["group-order-normal"]},"group-graphical-shape":{"$class":["group-graphical-shape-none"]}},"$class":["group-graphical-shape-none","group-order-normal","text-align-center","section-height-fullscreen","site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site-footer-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-footer","Footer3col"]},"the-colorist":{"$item_index":3,"colorverse":{"colors-solution":{"$class":["colors-dark"]},"colors-locality":{"$class":["colors-global"]}},"$class":["colors-global","colors-dark","site:colors-global","site:colors-light"],"colorsSolution":{"isLight":false,"isDark":true,"lightnessClass":"is-dark","base":{"r":25,"g":25,"b":23},"bg":{"r":24,"g":24,"b":22},"box":{"r":25,"g":25,"b":23},"boxShadow":{"r":0,"g":0,"b":0,"a":0.3},"boxPop":{"r":100,"g":182,"b":172},"boxPopText":{"r":0,"g":0,"b":0},"boxPop2":{"r":41,"g":108,"b":103},"boxPop2Text":{"r":255,"g":255,"b":255},"boxPopTextHover":{"r":0,"g":0,"b":0},"boxPop2TextHover":{"r":204,"g":204,"b":204},"boxPopMostVibrant":{"r":54,"g":226,"b":206},"boxPopMostVibrantText":{"r":0,"g":0,"b":0},"selectionText":{"r":255,"g":255,"b":255},"selection":{"r":218,"g":71,"b":101,"a":0.5},"header":{"r":25,"g":25,"b":23},"zebraStripe":{"r":28,"g":28,"b":26},"line":{"r":42,"g":42,"b":40},"mediaBorder":{"css":"1px solid hsl(60, 2%, 16%)","width":1,"type":"solid","color":{"r":42,"g":42,"b":40}},"mediaShadowColor":{"r":0,"g":0,"b":0,"a":0.4},"mediaInsetColor":{"r":255,"g":255,"b":255,"a":0.1},"mediaShadows":[{"css":"0 1px 2px rgba(0, 0, 0, 0.4)","x":0,"y":1,"blur":2,"color":{"r":0,"g":0,"b":0,"a":0.4},"inset":false},{"css":"inset 0 1px 1px rgba(255, 255, 255, 0.1)","x":0,"y":1,"blur":1,"color":{"r":255,"g":255,"b":255,"a":0.1},"inset":true}],"title":{"r":220,"g":239,"b":237},"title2":{"r":162,"g":175,"b":173},"subTitle":{"r":90,"g":90,"b":89},"text":{"r":243,"g":243,"b":242},"text2":{"r":178,"g":178,"b":176},"textShadow":{"r":13,"g":13,"b":12,"a":0.5},"textShadowProps":{"color":{"r":13,"g":13,"b":12,"a":0.5},"x":0,"y":1,"blur":0},"textPop":{"r":225,"g":108,"b":132},"textPop2":{"r":145,"g":203,"b":196},"meta":{"r":90,"g":90,"b":89},"metaHover":{"r":103,"g":103,"b":101},"icon":{"r":225,"g":108,"b":132},"iconSelected":{"r":225,"g":108,"b":132},"iconOver":{"r":225,"g":108,"b":132},"palette":[{"r":255,"g":255,"b":255},{"r":25,"g":25,"b":23},{"r":41,"g":108,"b":103},{"r":100,"g":182,"b":172},{"r":218,"g":71,"b":101}]}},"the-lensman":{"filter":{"$class":["passthrough"],"graph":"passthrough","config":null}},"itemsClasses":["site-footer-item","item:can-cover-filter","item:can-cover-crop","item:can-cover-overlay","item:is-footer"],"siteClasses":["site:w-multiple-item","hero-transition-none","section-v-padding-small","section-h-padding-small","Brockmann","site:colors-global","site:colors-light"],"componentClasses":["Footer3col"]}}}</script><script type="text/javascript">
        window.theGridSiteType = 'permalink';
        var mountApp = dsNickJones.default.mountApp;
        mountApp(document.getElementById('app'), window.pageReactInitState);
        console.log('mounted app.');
        </script><script id="web-font-loader">
      if (window.WebFont) {
        WebFont.load({"google":{"families":["Source Sans Pro:400,700","Varela Round:400,400italic,700,700italic"]}});
      }
    </script></body></html>